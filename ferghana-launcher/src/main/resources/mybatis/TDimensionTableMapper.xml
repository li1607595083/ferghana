<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.unityup.project.system.mapper.TDimensionTableMapper">
    
    <resultMap type="TDimensionTable" id="TDimensionTableResult">
        <result property="dimensionId"    column="dimension_id"    />
        <result property="dimensionName"    column="dimension_name"    />
        <result property="connectorType"    column="connector_type"    />
        <result property="dataSource"    column="data_source"    />
        <result property="description"    column="description"    />
        <result property="redisAddress"    column="redis_address"    />
        <result property="redisDataType"    column="redis_data_type"    />
        <result property="redisKey"    column="redis_key"    />
        <result property="redisKeyField"    column="redis_key_field"    />
        <result property="jdbcUrlAddress"    column="jdbc_url_address"    />
        <result property="jdbcDrive"    column="jdbc_drive"    />
        <result property="jdbcUserName"    column="jdbc_user_name"    />
        <result property="jdbcUserPwd"    column="jdbc_user_pwd"    />
        <result property="schemaDefine"    column="schema_define"    />
        <result property="zookeeperAddress"    column="zookeeper_address"    />
        <result property="hbaseTableName"    column="hbase_table_name"    />
        <result property="hbaseSchemaDefine"    column="hbase_schema_define"    />
        <result property="rowkey"    column="rowkey"    />
        <result property="createTime"    column="create_time"    />
        <result property="modifyTime"    column="modify_time"    />
    </resultMap>

    <sql id="selectTDimensionTableVo">
        select dimension_id, dimension_name, connector_type, data_source, description, redis_address, redis_data_type, redis_key,
         redis_key_field, jdbc_url_address, jdbc_drive, jdbc_user_name, jdbc_user_pwd, schema_define, zookeeper_address,
          hbase_table_name,hbase_schema_define,rowkey, create_time, modify_time from t_dimension_table
    </sql>

    <select id="selectTDimensionTableList" parameterType="TDimensionTable" resultMap="TDimensionTableResult">
        <include refid="selectTDimensionTableVo"/>
        <where>  
            <if test="dimensionName != null  and dimensionName != ''"> and dimension_name like concat('%', #{dimensionName}, '%')</if>
            <if test="connectorType != null  and connectorType != ''"> and connector_type = #{connectorType}</if>
            <if test="dataSource != null  and dataSource != ''"> and data_source = #{dataSource}</if>
            <if test="description != null  and description != ''"> and description like concat('%', #{description}, '%')</if>
        </where>
    </select>
    
    <select id="selectTDimensionTableById" parameterType="Long" resultMap="TDimensionTableResult">
        <include refid="selectTDimensionTableVo"/>
        where dimension_id = #{dimensionId}
    </select>
        
    <insert id="insertTDimensionTable" parameterType="TDimensionTable" useGeneratedKeys="true" keyProperty="dimensionId">
        insert into t_dimension_table
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="dimensionName != null  and dimensionName != ''">dimension_name,</if>
            <if test="connectorType != null  and connectorType != ''">connector_type,</if>
            <if test="dataSource != null  and dataSource != ''">data_source,</if>
            <if test="description != null  and description != ''">description,</if>
            <if test="redisAddress != null  and redisAddress != ''">redis_address,</if>
            <if test="redisDataType != null  and redisDataType != ''">redis_data_type,</if>
            <if test="redisKey != null  and redisKey != ''">redis_key,</if>
            <if test="redisKeyField != null  and redisKeyField != ''">redis_key_field,</if>
            <if test="jdbcUrlAddress != null  and jdbcUrlAddress != ''">jdbc_url_address,</if>
            <if test="jdbcDrive != null  and jdbcDrive != ''">jdbc_drive,</if>
            <if test="jdbcUserName != null  and jdbcUserName != ''">jdbc_user_name,</if>
            <if test="jdbcUserPwd != null  and jdbcUserPwd != ''">jdbc_user_pwd,</if>
            <if test="schemaDefine != null  and schemaDefine != ''">schema_define,</if>
            <if test="zookeeperAddress != null  and zookeeperAddress != ''">zookeeper_address,</if>
            <if test="hbaseTableName != null  and hbaseTableName != ''">hbase_table_name,</if>
            <if test="hbaseSchemaDefine != null  and hbaseSchemaDefine != ''">hbase_schema_define,</if>
            <if test="rowkey != null  and rowkey != ''">rowkey,</if>
            <if test="createTime != null ">create_time,</if>
            <if test="modifyTime != null ">modify_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="dimensionName != null  and dimensionName != ''">#{dimensionName},</if>
            <if test="connectorType != null  and connectorType != ''">#{connectorType},</if>
            <if test="dataSource != null  and dataSource != ''">#{dataSource},</if>
            <if test="description != null  and description != ''">#{description},</if>
            <if test="redisAddress != null  and redisAddress != ''">#{redisAddress},</if>
            <if test="redisDataType != null  and redisDataType != ''">#{redisDataType},</if>
            <if test="redisKey != null  and redisKey != ''">#{redisKey},</if>
            <if test="redisKeyField != null  and redisKeyField != ''">#{redisKeyField},</if>
            <if test="jdbcUrlAddress != null  and jdbcUrlAddress != ''">#{jdbcUrlAddress},</if>
            <if test="jdbcDrive != null  and jdbcDrive != ''">#{jdbcDrive},</if>
            <if test="jdbcUserName != null  and jdbcUserName != ''">#{jdbcUserName},</if>
            <if test="jdbcUserPwd != null  and jdbcUserPwd != ''">#{jdbcUserPwd},</if>
            <if test="schemaDefine != null  and schemaDefine != ''">#{schemaDefine},</if>
            <if test="zookeeperAddress != null  and zookeeperAddress != ''">#{zookeeperAddress},</if>
            <if test="hbaseTableName != null  and hbaseTableName != ''">#{hbaseTableName},</if>
            <if test="hbaseSchemaDefine != null  and hbaseSchemaDefine != ''">#{hbaseSchemaDefine},</if>
            <if test="rowkey != null  and rowkey != ''">#{rowkey},</if>
            <if test="createTime != null ">#{createTime},</if>
            <if test="modifyTime != null ">#{modifyTime},</if>
         </trim>
    </insert>

    <update id="updateTDimensionTable" parameterType="TDimensionTable">
        update t_dimension_table
        <trim prefix="SET" suffixOverrides=",">
            <if test="dimensionName != null  and dimensionName != ''">dimension_name = #{dimensionName},</if>
            <if test="connectorType != null  and connectorType != ''">connector_type = #{connectorType},</if>
            <if test="dataSource != null  and dataSource != ''">data_source = #{dataSource},</if>
            <if test="description != null  and description != ''">description = #{description},</if>
            <if test="redisAddress != null  and redisAddress != ''">redis_address = #{redisAddress},</if>
            <if test="redisDataType != null  and redisDataType != ''">redis_data_type = #{redisDataType},</if>
            <if test="redisKey != null  and redisKey != ''">redis_key = #{redisKey},</if>
            <if test="redisKeyField != null  and redisKeyField != ''">redis_key_field = #{redisKeyField},</if>
            <if test="jdbcUrlAddress != null  and jdbcUrlAddress != ''">jdbc_url_address = #{jdbcUrlAddress},</if>
            <if test="jdbcDrive != null  and jdbcDrive != ''">jdbc_drive = #{jdbcDrive},</if>
            <if test="jdbcUserName != null  and jdbcUserName != ''">jdbc_user_name = #{jdbcUserName},</if>
            <if test="jdbcUserPwd != null  and jdbcUserPwd != ''">jdbc_user_pwd = #{jdbcUserPwd},</if>
            <if test="schemaDefine != null  and schemaDefine != ''">schema_define = #{schemaDefine},</if>
            <if test="zookeeperAddress != null  and zookeeperAddress != ''">zookeeper_address = #{zookeeperAddress},</if>
            <if test="hbaseTableName != null  and hbaseTableName != ''">hbase_table_name = #{hbaseTableName},</if>
            <if test="hbaseSchemaDefine != null  and hbaseSchemaDefine != ''">hbase_Schema_Define = #{hbaseSchemaDefine},</if>
            <if test="rowkey != null  and rowkey != ''">rowkey = #{rowkey},</if>
            <if test="createTime != null ">create_time = #{createTime},</if>
            <if test="modifyTime != null ">modify_time = #{modifyTime},</if>
        </trim>
        where dimension_id = #{dimensionId}
    </update>

    <delete id="deleteTDimensionTableById" parameterType="Long">
        delete from t_dimension_table where dimension_id = #{dimensionId}
    </delete>

    <delete id="deleteTDimensionTableByIds" parameterType="String">
        delete from t_dimension_table where dimension_id in 
        <foreach item="dimensionId" collection="array" open="(" separator="," close=")">
            #{dimensionId}
        </foreach>
    </delete>
    
</mapper>